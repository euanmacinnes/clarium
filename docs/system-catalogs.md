System Catalogs and Information Schema
=====================================

Clarium provides compatibility views/tables so common tools (ORMs, BI, psql)
can introspect objects and generate SQL. These are computed from on‑disk state.

information_schema
------------------
- `information_schema.schemata(schema_name)` — lists schemas in all databases under the storage root.
- `information_schema.tables(table_schema, table_name, table_type)` — lists regular and time tables as `BASE TABLE`.
- `information_schema.columns(table_schema, table_name, column_name, ordinal_position, data_type, is_nullable, udt_name)` — lists columns for tables (with `_time` synthesized when absent from schema.json).
- `information_schema.views(table_schema, table_name, view_definition)` — lists views discovered by scanning `.view` files.

pg_catalog (compatibility)
--------------------------
- `pg_catalog.pg_class(relname, nspname, relkind, oid, relnamespace, relpartbound)`
  - Includes tables (`relkind='r'`) and views (`relkind='v'`).
  - OIDs are stable per object and persisted for tables in `schema.json` and for views in the `.view` file.
- `pg_catalog.pg_views(schemaname, viewname, definition)` — convenience listing of all views.
- `pg_catalog.pg_type(oid, typname, typarray, typnamespace, typelem, typrelid, typbasetype, typtypmod, typcategory, typtype)` — minimal type table for common scalar types (`int4`, `int8`, `float8`, `text`, `bool`, `timestamp`, `timestamptz`).
- `pg_catalog.pg_namespace(oid, nspname)` — includes `pg_catalog` and `public`.
- `pg_catalog.pg_attribute(attrelid, attname, attnum)` — columns per table, keyed by the table’s OID from `pg_class`.
- `pg_catalog.pg_constraint(oid, conrelid, conname, contype, conkey, conindid)` — primary key constraints synthesized from `schema.json` when a PRIMARY marker exists.
- `pg_catalog.pg_constraint_columns(oid, conrelid, conname, contype, attnum, ord, conindid)` — pre‑expanded view of `pg_constraint` suitable for ORMs that avoid array unnesting.
- `pg_catalog.pg_description(objoid, classoid, objsubid, description)` — empty placeholder with expected columns.

Stable OIDs
-----------
- Tables: assigned on first access and persisted into `schema.json` under `__clarium_oids__.class_oid`.
- Views: assigned on first access and persisted into `<name>.view` under `__clarium_oids__.class_oid`.

Helper functions
----------------
- `pg_get_viewdef(oid)` — returns the stored view definition for a view OID, or NULL.
- `regclass` casts are approximated when tools resolve relation names; Clarium also exposes helpers to compute stable OIDs from qualified names in various paths.

Notes
-----
- Catalogs are generated by scanning the storage root; they reflect the current on‑disk state.
- Only a subset of PostgreSQL catalogs is implemented; enough to satisfy common clients (psql, SQLAlchemy, DBeaver, etc.).
